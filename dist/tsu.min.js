/*!
 * Copyright 2016, nju33
 * Released under the MIT License
 * https://github.com/totora0155/tsu.js
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Tsu=t()}(this,function(){"use strict";function e(t,i){if(this.label=t,this.opts={color:"#fff",label:!0},null===i.color&&"undefined"==typeof i.color||(this.opts.color=i.color),"boolean"===i.label)this.opts.label=i.label;else if("undefined"!=typeof i.label)throw Error("`label` specify a Boolean");if("number"!=typeof e.config.maxSize&&"undefined"!=typeof e.config.maxSize)throw Error("`maxSize` specify a Number")}function t(){l();var e=document.createElement("ul");return e.className="tsu__box",document.body.appendChild(e),e}function i(e,t,i){var n=document.createElement("li"),o="";return i.label&&(o='<span class="tsu__label">'+e+"</span>"),n.className="tsu__log tsu__"+e,n.innerHTML='<div class="tsu__inner">\n                     '+o+'\n                     <span class="tsu__message">'+t+"</span>\n                   </div>",n.children[0].style.background=i.color,n}function n(e){try{f.insertBefore(e,f.children[0])}catch(t){f.appendChild(e)}e.setAttribute("data-height",e.children[0].clientHeight),u.unshift(e)}function o(e){var t=e.getAttribute("data-height");e.style.height=t+"px",e.style.opacity=1}function r(t,i){switch(null!==i&&"undefined"!=typeof i||(i="fall"),i){case"fall":a(t);break;case"hide":c(t);break;default:c(t)}e.config.clickEvent&&t.removeEventListener("click",s,!1)}function s(e){r(e.currentTarget,"hide")}function a(t){var i=t.getAttribute("data-height");t.style.opacity=0,t.children[0].style.top=i+"px",setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},e.config.duration/1e3*1.6)}function c(e){e.style.opacity=0,e.style.height=0}function l(){var t=document.createElement("style"),i="cubic-bezier(0.175, 0.885, 0.32, 1.275)";if("number"!=typeof e.config.duration||e.config.duration<0)throw Error("Please `Tsu.config.duration` specify a number value");var n=e.config.duration/1e3,o=n/1.6,r=void 0;if("left"===e.config.position)r="left: 1em;";else if("right"===e.config.position)r="right: 1em;";else{if("center"!==e.config.position)throw Error("`position` specify one of the `left`, `center`, `right`");r="right: 50%;\n                -ms-transform: translateX(50%);\n                -webkit-transform: translateX(50%);\n                transform: translateX(50%);"}var s=[".tsu__box {","position: fixed;","top: 1em;","min-width: "+e.config.width+";",""+r,"list-style: none;","}",".tsu__log {","overflow: hidden;","margin: .5em;","-webkit-transition:","height "+n+"s "+i+",","opacity "+o+"s ease-out;","transition:","height "+n+"s "+i+",","opacity "+o+"s ease-out;","height: 0;","opacity: 0;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;","}",".tsu__inner {","position: relative;","padding: .5em;","-webkit-transition: top "+o+"s ease-out;","transition: top "+o+"s ease-out;","top: 0;","}",".tsu__label {","padding: .3em .5em;","margin-right: .5em;","border-radius: 7px;","background: hsla(0, 100%, 100%, .3);","}"].join("");t.innerText=s,document.head.insertBefore(t,document.head.children[0])}var u=[],f=null;return e.config={width:"15em",duration:200,timeout:2e3,clickEvent:!1,position:"center",maxSize:3},e.prototype.add=function(a){f||(f=t());var c=i(this.label,a,this.opts);if(e.config.clickEvent&&c.addEventListener("click",s,!1),n(c),setTimeout(o.bind(null,c),0),u.length>e.config.maxSize){var l=u.pop();r(l)}if(e.config.timeout)try{setTimeout(function(){return r(c,"hide")},e.config.timeout)}catch(d){throw Error(d)}},e});